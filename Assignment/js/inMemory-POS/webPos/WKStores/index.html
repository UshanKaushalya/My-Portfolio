<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WK Stores</title>
    <link rel="stylesheet" href="css/bootstrap.css">
</head>


<body>


  <header class="container-fluid">

    <div class="row p-1">

      <div class="col-2">

        <h1 style="font-size: 2vw">WK Stores</h1>

      </div>

      <div class="col-7">
      </div>

      <div class="col-3">

        <nav class="navbar navbar-expand-lg">

          <div class="container-fluid">

            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav">
                <a class="nav-link active" aria-current="page" id="btnHome">Home</a>
                <a class="nav-link" id="btnCustomer">Customer</a>
                <a class="nav-link" id="btnItem">Item</a>
                <a class="nav-link" id="btnOrder">Order</a>
              </div>
            </div>

          </div>

        </nav>

      </div>

    </div>

  </header>


  <main id="homePage">

    <section class="container-fluid p-0 position-relative" style="height: 93vh; width: 100vw">

      <img src="assest/homepage/Background.png" class="img-fluid position-absolute" style="height: 93vh; width: 100vw">

      <div class="position-absolute text-center w-100">

        <h1 style="color: white">Welcome</h1>
        <h1 style="color: white; font-size: 4vw">WK STORES PVT. LTD</h1>

      </div>

    </section>

  </main>



  <main id="customerPage">

    <section class="container-fluid p-0 position-relative bg-danger" style="height: 93vh; width: 100vw">

      <img src="assest/homepage/Background.png" class="img-fluid position-absolute" style="height: 93vh; width: 100vw">

      <div class="row">

        <div class="col">
          <div style="height: 100px"></div>
        </div>

      </div>

      <div class="row position-absolute container-fluid">

        <div class="col-1"></div>

        <div class="col-4">

          <div>

            <form>

              <h2 style="color: white" class="text-center m-4">Customer Registration</h2>

              <div class="mb-3">
                <label for="id" class="form-label" style="color: white">Customer ID</label>
                <input id="customerIdText" type="id" class="form-control" id="id">
              </div>

              <div class="mb-3">
                <label for="name" class="form-label" style="color: white">Customer Name</label>
                <input id="customerNameText" type="name" class="form-control" id="name">
              </div>

              <div class="mb-3">
                <label for="tel" class="form-label" style="color: white">Telephone</label>
                <input id="customerTelText" type="tel" class="form-control" id="tel">
              </div>

              <div class="mb-3">
                <label for="address" class="form-label" style="color: white">Address</label>
                <input id="customerAddressText" type="address" class="form-control" id="address">
              </div>

              <div class="d-grid gap-2 d-md-flex justify-content-md-end my-5">
                <button id="btnSave" class="btn btn-primary me-md-2" type="button">Save</button>
                <button id="btnUpdate" class="btn btn-primary" type="button">Update</button>
                <button id="btnRemove" class="btn btn-primary" type="button">Remove</button>
                <button id="btnGetAll" class="btn btn-primary" type="button">Get All</button>
              </div>

            </form>

          </div>

        </div>

        <div class="col-1"></div>

        <div class="col-5">

          <div>

            <h2 style="color: white" class="text-center m-4">Customer Details</h2>

            <table class="table">
              <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Telephone</th>
                <th scope="col">Address</th>
              </tr>
              </thead>

              <tbody id="tblBody">

              </tbody>
            </table>


          </div>

        </div>

        <div class="col-1"></div>

      </div>

    </section>

  </main>

    <main id="itemPage">

      <section class="container-fluid p-0 position-relative bg-danger" style="height: 93vh; width: 100vw">

        <img src="assest/homepage/Background.png" class="img-fluid position-absolute" style="height: 93vh; width: 100vw">

        <div class="row">

          <div class="col">
            <div style="height: 100px"></div>
          </div>

        </div>

        <div class="row position-absolute container-fluid">

          <div class="col-1"></div>

          <div class="col-4">

            <div>

              <form>

                <h2 style="color: white" class="text-center m-4">Item</h2>

                <div class="mb-3">
                  <label for="id" class="form-label" style="color: white">Item Code</label>
                  <input type="code" class="form-control" id="code">
                </div>

                <div class="mb-3">
                  <label for="item" class="form-label" style="color: white">Item</label>
                  <input type="item" class="form-control" id="item">
                </div>

                <div class="mb-3">
                  <label for="tel" class="form-label" style="color: white">Brand</label>
                  <input type="brand" class="form-control" id="brand">
                </div>

                <div class="mb-3">
                  <label for="address" class="form-label" style="color: white">Quantity</label>
                  <input type="qty" class="form-control" id="qty">
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end my-5">
                  <button class="btn btn-primary me-md-2" type="button">Save</button>
                  <button class="btn btn-primary" type="button">Update</button>
                </div>

              </form>

            </div>

          </div>

          <div class="col-1"></div>

          <div class="col-5">

            <div>

              <h2 style="color: white" class="text-center m-4">Item Details</h2>

              <table class="table">
                <thead>
                <tr>
                  <th scope="col">Item Code</th>
                  <th scope="col">Item</th>
                  <th scope="col">Brand</th>
                  <th scope="col">Quantity</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                  <th scope="row">I001</th>
                  <td>Mark</td>
                  <td>Otto</td>
                  <td>@mdo</td>
                </tr>
                <tr>
                  <th scope="row">I002</th>
                  <td>Jacob</td>
                  <td>Thornton</td>
                  <td>@fat</td>
                </tr>
                <tr>
                  <th scope="row">I003</th>
                  <td colspan="2">Larry the Bird</td>
                  <td>@twitter</td>
                </tr>
                </tbody>
              </table>


            </div>

          </div>

          <div class="col-1"></div>

        </div>

      </section>

    </main>



  <script src="code.jquery.com_jquery-3.7.0.min.js"></script>

  <script>

    document.getElementById("customerPage").style.display="none";
    document.getElementById("itemPage").style.display="none";

    document.getElementById("btnCustomer").addEventListener("click",function (){
      document.getElementById("homePage").style.display="none";
      document.getElementById("customerPage").style.display="block";
      document.getElementById("itemPage").style.display="none";
    });

    document.getElementById("btnItem").addEventListener("click",function (){
      document.getElementById("homePage").style.display="none";
      document.getElementById("customerPage").style.display="none";
      document.getElementById("itemPage").style.display="block";
    });

    document.getElementById("btnHome").addEventListener("click",function (){
      document.getElementById("homePage").style.display="block";
      document.getElementById("customerPage").style.display="none";
      document.getElementById("itemPage").style.display="none";
    });



    var btnSave = $("#btnSave");
    var btnRemove = $("#btnRemove");
    var btnGetAll = $("#btnGetAll");
    var btnUpdate = $("#btnUpdate");


    var detailsBig = [];


    let regexId = /^(C00-)[0-9]{3}$/;
    let regexName = /^[A-Za-z\s]+$/;
    let regexTel = /^\d{10}$/;
    let regexAddress = /^[A-Za-z\s]+$/;



    $("#customerIdText, #customerNameText, #customerTelText, #customerAddressText").keydown(function (e){
      if(e.key == "Tab"){
        e.preventDefault();
      }
    });



    $("#customerIdText").keyup(function (e){
      if(regexId.test($("#customerIdText").val())){
        $("#customerIdText").css("background-color","white");
      }else{
        $("#customerIdText").css("background-color","red");
      }
    });


    $("#customerIdText").keydown(function (e){
      if(e.keyCode == 13 && regexId.test($("#customerIdText").val())) {
        $("#customerNameText").focus();
      }
    });



    $("#customerNameText").keyup(function (e){
      if(regexName.test($("#customerNameText").val())){
        $("#customerNameText").css("background-color","white");
      }else{
        $("#customerNameText").css("background-color","red");
      }
    });

    $("#customerNameText").keydown(function (e){
      if(e.keyCode == 13 && regexName.test($("#customerNameText").val())){
        $("#customerTelText").focus();
      }
    });




    $("#customerTelText").keyup(function (e){
      if(regexTel.test($("#customerTelText").val())){
        $("#customerTelText").css("background-color","white");
      }else{
        $("#customerTelText").css("background-color","red");
      }
    });

    $("#customerTelText").keydown(function (e){
      if(e.keyCode == 13 && regexTel.test($("#customerTelText").val())){
        $("#customerAddressText").focus();
      }
    });




    $("#customerAddressText").keyup(function (e){
      if(regexAddress.test($("#customerAddressText").val())){
        $("#customerAddressText").css("background-color","white");
      }else{
        $("#customerAddressText").css("background-color","red");
      }
    });

    $("#customerAddressText").keydown(function (e){
      if(e.keyCode == 13 && regexAddress.test($("#customerAddressText").val())){
        save();
      }
    });



    function save(){

      if(regexId.test($("#customerIdText").val()) && regexName.test($("#customerNameText").val()) && regexTel.test($("#customerTelText").val()) && regexAddress.test($("#customerAddressText").val())){
        var is = false;

        for(let i = 0; i < detailsBig.length; i++){
          if(detailsBig[i].cid == $("#customerIdText").val()){
            is = true;
          }
        }

        if(is == false){

          var tblBody = $("#tblBody");

          var id = $("#customerIdText").val();
          var name = $("#customerNameText").val();
          var tel = $("#customerTelText").val();
          var address = $("#customerAddressText").val();


          var customer = {
            cid : id,
            cname : name,
            ctel : tel,
            caddress : address
          }

          detailsBig.push(customer);

          let tr=$('<tr> <td>'+detailsBig[detailsBig.length-1].cid+'</td> <td>'+detailsBig[detailsBig.length-1].cname+'</td> <td>'+detailsBig[detailsBig.length-1].ctel+'</td> <td>'+detailsBig[detailsBig.length-1].caddress+'</td></tr>');
          $("#tblBody").append(tr);

        }else{
          alert("Customer ID Already Used")
        }
      }

      // console.log(id);


      $("#tblBody>tr").click(function (e){

        $("#customerIdText").val($(this).children().eq(0).text());
        $("#customerNameText").val($(this).children().eq(1).text());
        $("#customerTelText").val($(this).children().eq(2).text());
        $("#customerAddressText").val($(this).children().eq(3).text());

      });

      clearFields();
    }


    btnSave.click(function(){

      save();

    });



    function getAll(){

      $('#tblBody').empty();

      for(var i = 0; i < detailsBig.length; i++){

        var id = detailsBig[i].cid;
        var name = detailsBig[i].cname;
        var address = detailsBig[i].caddress;
        var contact = detailsBig[i].ctel;

        let row = `<tr><td>${id}</td><td>${name}</td><td>${contact}</td><td>${address}</td></tr>`

        $('#tblBody').append(row);

      }
    }


    btnGetAll.click(function (){

     getAll();

    });



    btnRemove.click(function(event){

      var id = $("#customerIdText").val();

      for(var i = 0; i < detailsBig.length; i++){

        if(detailsBig[i].cid == id){
          detailsBig.splice(i, 1);
          console.log(detailsBig.length);
          getAll();
          clearFields();
          break;
        }

      }

    });


    btnUpdate.click(function(){

      var id = $("#customerIdText").val();
      var name = $("#customerNameText").val();
      var tel = $("#customerTelText").val();
      var address = $("#customerAddressText").val();

      for(var i = 0; i < detailsBig.length; i++){

        if(detailsBig[i].cid == id){

          detailsBig[i].cid = id;
          detailsBig[i].cname = name;
          detailsBig[i].caddress = address;
          detailsBig[i].ctel = contact;

          getAll();
          clearFields();

          break;

        }

        if(i == detailsBig.length - 1){
          alert("No")
        }

      }

      getAll();

    });


    function clearFields(){
      $("#customerIdText").val("");
      $("#customerNameText").val("");
      $("#customerTelText").val("");
      $("#customerAddressText").val("");

      $("#customerIdText").focus();
    }




  </script>

</body>

</html>